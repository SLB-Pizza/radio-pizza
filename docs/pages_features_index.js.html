<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/features/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/features/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from "react";
import { Link, graphql } from "gatsby";
import { StickyFeature } from "../../components";
import PropTypes from "prop-types";

export default function FeaturesIndexPage({ data }) {
  // Focus the node for the prismicContent check below.
  const prismicContent = data.prismic.allFeatures.edges;

  /**
   * This line is here to prevent an error from occurring when you eventually deploy the site live. There is an issue with the preview functionality that requires this check on every page.
   * Details: https://prismic.io/docs/gatsby/rendering/retrieve-the-document-object#21_0-adding-a-validation-check
   */
  if (!prismicContent) return null;

  /**
   * Grab the first node object from the prismicContent array of nodes to pass as leadfeatureData prop to StickyFeature.
   *
   * The data from the 'FeaturesIndexPage' query comes pre-sorted to show the most recent published feature, NOT the most recently updated.
   *
   * The remaining array of node objects can be mapped over normally using XYZ_Component.
   */

  const dataDocument = prismicContent;
  const leadFeature = prismicContent.shift();
  const leadFeatureData = leadFeature.node;
  const allOtherFeatures = prismicContent;

  const { _meta, body } = leadFeatureData;

  // console.log("index > leadFeatureData", leadFeatureData);
  console.log("index > leadFeatureData.body", body);
  console.log("index > leadFeatureData._meta", _meta);

  return (
    &lt;main className="site-page all-features">
      &lt;StickyFeature leadFeatureData={leadFeatureData} />
      &lt;ul>
        &lt;li>
          &lt;Link to="/features/dev-test-feature-1">Link to Test Feature 1&lt;/Link>
        &lt;/li>
        &lt;li>
          &lt;Link to="/features/dev-test-feature-2">Link to Test Feature 2&lt;/Link>
        &lt;/li>
      &lt;/ul>
      &lt;hr />

      &lt;section className="container is-fluid">
        &lt;div className="columns is-multiline">
          &lt;div className="column is-12">
            &lt;h1 className="title is-size-3-desktop is-size-4-touch">
              Features Data
            &lt;/h1>
          &lt;/div>
          &lt;div className="column is-12">
            &lt;h1 className="title">leadFeatureData Data Object&lt;/h1>
            &lt;pre>{JSON.stringify(leadFeatureData, null, 2)}&lt;/pre>
          &lt;/div>
          &lt;div className="column is-12">
            &lt;h1 className="title">allOtherFeatures Data Object&lt;/h1>
            &lt;pre>{JSON.stringify(allOtherFeatures, null, 2)}&lt;/pre>
          &lt;/div>
        &lt;/div>
      &lt;/section>
    &lt;/main>
  );
}

FeaturesIndexPage.propTypes = {
  leadFeatureData: PropTypes.exact({
    _meta: PropTypes.object.isRequired,
    body: PropTypes.arrayOf(PropTypes.object),
  }),
  allOtherFeatures: PropTypes.arrayOf(PropTypes.object),
};

export const query = graphql`
  query FeaturesIndexPage {
    prismic {
      allFeatures(sortBy: meta_firstPublicationDate_DESC) {
        edges {
          node {
            _meta {
              uid
              firstPublicationDate
              lastPublicationDate
              type
              tags
            }
            body {
              ... on PRISMIC_FeatureBodyHeadline_block {
                type
                primary {
                  feature_headline_img
                  feature_category
                  feature_subcategory
                  feature_headline
                  feature_subtitle
                  feature_author_pic
                  feature_author {
                    ... on PRISMIC_Staff {
                      hmbk_staff_name
                      hmbk_staff_position
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
`;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Blockquote.html">Blockquote</a></li><li><a href="HeadlineBlock.html">HeadlineBlock</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DateSelectorButton-functionthatcreatesstyledbuttonswithtogglingfunctionalitybuiltin">DateSelectorButton - function that creates styled buttons with toggling functionality built in</a></li><li><a href="global.html#getBlockquoteStyling">getBlockquoteStyling</a></li><li><a href="global.html#linkResolver">linkResolver</a></li><li><a href="global.html#playAudioButton-functionthattakesinpropsfromBioMixListandcreatesactiveYTaudiosources">playAudioButton - function that takes in props from BioMixList and creates active YT audio sources</a></li><li><a href="global.html#processPublicationDates">processPublicationDates</a></li><li><a href="global.html#ResidentsIndexPage">ResidentsIndexPage</a></li><li><a href="global.html#residentSocialIcons-functionthattakesinpropsfromBioMixListandcreatesactiveYTaudiosources">residentSocialIcons - function that takes in props from BioMixList and creates active YT audio sources</a></li><li><a href="global.html#slideGenerator">slideGenerator</a></li><li><a href="global.html#TwoImagesAndText">TwoImagesAndText</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Sun Aug 09 2020 20:33:49 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
